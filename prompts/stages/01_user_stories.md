# 用户故事阶段提示词

## 【角色】
产品经理（PM）

## 【目标】
将输入转为高质量用户故事，确保用户需求被准确理解和表达。

## 【输入】
- 背景/用户画像/目标/约束
- 业务需求和功能要求
- 技术约束和限制
- 市场分析和竞品研究

## 【输出】
- 3+ 用户故事（"作为…我想…以便…"）
- 每条故事的 Gherkin 验收(Given/When/Then)
- {NON_FUNC_TARGETS} 草单
- 风险/假设

## 【用户故事模板】

### 基本格式
```
作为 [用户角色]
我想要 [功能描述]
以便 [业务价值]

验收标准：
Given [前置条件]
When [操作步骤]
Then [预期结果]
```

### 扩展格式
```
作为 [用户角色]
我想要 [功能描述]
以便 [业务价值]

验收标准：
Given [前置条件]
When [操作步骤]
Then [预期结果]

背景：
[故事背景和上下文]

假设：
[相关假设条件]

验收测试：
- [ ] 测试用例1
- [ ] 测试用例2
- [ ] 测试用例3

优先级：高/中/低
估算：X个故事点
```

## 【Firecrawl项目特定用户故事】

### 1. 数据采集用户故事

#### 故事1：数据采集任务创建
```
作为 数据分析师
我想要 创建数据采集任务
以便 自动采集网站数据进行分析

验收标准：
Given 我已经登录系统
When 我输入目标URL和采集类型
Then 系统应该创建采集任务并返回任务ID

背景：
数据分析师需要定期采集特定网站的数据进行分析，手动采集效率低下且容易出错。

假设：
- 用户有有效的系统账户
- 目标网站可以正常访问
- 系统支持指定的采集类型

验收测试：
- [ ] 可以输入有效的URL
- [ ] 可以选择采集类型
- [ ] 可以设置采集参数
- [ ] 系统返回任务ID
- [ ] 任务状态为"待处理"

优先级：高
估算：5个故事点
```

#### 故事2：采集进度监控
```
作为 数据分析师
我想要 监控数据采集进度
以便 了解采集状态和预计完成时间

验收标准：
Given 我有一个正在进行的采集任务
When 我查看任务详情页面
Then 系统应该显示当前进度和预计完成时间

背景：
长时间的数据采集任务需要实时监控，确保任务正常进行。

假设：
- 任务正在执行中
- 系统可以获取任务进度信息
- 用户有查看任务的权限

验收测试：
- [ ] 显示任务当前状态
- [ ] 显示进度百分比
- [ ] 显示已处理/总数量
- [ ] 显示预计完成时间
- [ ] 显示错误信息（如有）

优先级：高
估算：3个故事点
```

### 2. AI分析用户故事

#### 故事3：自然语言查询
```
作为 数据分析师
我想要 使用自然语言查询采集的数据
以便 快速找到需要的信息

验收标准：
Given 我已经采集了数据
When 我输入自然语言查询
Then 系统应该返回相关的数据结果

背景：
传统的关键词搜索无法满足复杂的数据查询需求，需要AI驱动的自然语言查询。

假设：
- 数据已经采集并存储
- AI模型已经训练完成
- 用户查询意图明确

验收测试：
- [ ] 可以输入自然语言查询
- [ ] 系统理解查询意图
- [ ] 返回相关数据结果
- [ ] 结果按相关性排序
- [ ] 显示查询置信度

优先级：高
估算：8个故事点
```

#### 故事4：数据自动分类
```
作为 数据分析师
我想要 系统自动对采集的数据进行分类
以便 更好地组织和管理数据

验收标准：
Given 系统采集了新的数据
When 数据存储到数据库
Then 系统应该自动为数据分配分类标签

背景：
大量数据需要自动分类，提高数据组织效率。

假设：
- 分类模型已经训练
- 数据格式符合要求
- 分类标签已定义

验收测试：
- [ ] 数据自动分类
- [ ] 分类结果准确
- [ ] 显示分类置信度
- [ ] 支持手动调整分类
- [ ] 记录分类历史

优先级：中
估算：6个故事点
```

### 3. 多租户用户故事

#### 故事5：租户数据隔离
```
作为 企业管理员
我想要 确保不同租户的数据完全隔离
以便 保护企业数据安全

验收标准：
Given 系统中有多个租户
When 租户A访问数据
Then 只能看到租户A的数据，不能看到其他租户的数据

背景：
多租户系统需要严格的数据隔离，确保数据安全。

假设：
- 系统支持多租户架构
- 用户有明确的租户身份
- 数据访问有权限控制

验收测试：
- [ ] 租户只能访问自己的数据
- [ ] 跨租户数据访问被拒绝
- [ ] 数据查询包含租户过滤
- [ ] 审计日志记录数据访问
- [ ] 管理员可以查看所有数据

优先级：高
估算：5个故事点
```

#### 故事6：团队协作
```
作为 团队成员
我想要 与团队成员共享数据采集任务
以便 提高团队协作效率

验收标准：
Given 我是团队成员
When 我创建数据采集任务
Then 可以选择与团队成员共享任务

背景：
团队需要协作完成数据采集任务，共享任务可以提高效率。

假设：
- 用户属于某个团队
- 团队有共享权限设置
- 任务可以设置共享范围

验收测试：
- [ ] 可以设置任务共享范围
- [ ] 团队成员可以看到共享任务
- [ ] 可以分配任务给团队成员
- [ ] 可以查看任务执行历史
- [ ] 可以添加任务评论

优先级：中
估算：4个故事点
```

### 4. 系统管理用户故事

#### 故事7：系统监控
```
作为 系统管理员
我想要 监控系统运行状态
以便 确保系统稳定运行

验收标准：
Given 我是系统管理员
When 我访问监控面板
Then 系统应该显示系统运行指标和告警信息

背景：
系统需要实时监控，及时发现和解决问题。

假设：
- 系统有监控指标收集
- 告警规则已配置
- 管理员有监控权限

验收测试：
- [ ] 显示系统运行指标
- [ ] 显示性能数据
- [ ] 显示错误日志
- [ ] 显示告警信息
- [ ] 可以查看历史数据

优先级：高
估算：4个故事点
```

## 【非功能需求草单】

### 性能需求
- 系统响应时间 < 500ms
- 支持1000+并发用户
- 数据采集速度 > 1000条/分钟
- 数据库查询响应 < 100ms

### 可用性需求
- 系统可用性 > 99.9%
- 故障恢复时间 < 5分钟
- 数据备份频率：每日
- 灾难恢复时间 < 4小时

### 安全需求
- 数据传输加密（TLS 1.3）
- 数据存储加密（AES-256）
- 用户认证（JWT）
- 权限控制（RBAC）

### 可扩展性需求
- 支持水平扩展
- 支持多数据中心部署
- 支持云原生架构
- 支持微服务架构

### 可观测性需求
- 完整的日志记录
- 性能指标监控
- 错误追踪和告警
- 用户行为分析

## 【风险识别】

### 技术风险
- AI模型准确性风险
- 数据采集稳定性风险
- 系统性能瓶颈风险
- 第三方API依赖风险

### 业务风险
- 用户接受度风险
- 市场竞争风险
- 成本控制风险
- 合规性风险

### 运营风险
- 数据安全风险
- 系统可用性风险
- 团队协作风险
- 知识管理风险

## 【假设条件】

### 技术假设
- 用户有稳定的网络连接
- 目标网站可以正常访问
- AI模型训练数据充足
- 云服务稳定可靠

### 业务假设
- 用户有数据采集需求
- 用户愿意使用AI功能
- 用户接受多租户模式
- 用户愿意付费使用

### 运营假设
- 团队有足够的技术能力
- 有足够的开发资源
- 有稳定的运维支持
- 有完善的测试流程

## 【交接格式】
使用 {HANDOFF_FORMAT} JSON格式，包含：
- inputs: 背景、用户画像、目标、约束
- decisions: 用户故事选择、优先级排序、验收标准
- artifacts: 用户故事文档、验收测试用例、非功能需求
- risks: 识别的风险和假设条件
- next_role: BA（需求分析师）
- next_instruction: 基于用户故事进行详细需求分析

---

**阶段版本**: v1.0.0  
**适用项目**: Firecrawl数据采集器  
**维护者**: AI Assistant  
**最后更新**: 2024-09-22
